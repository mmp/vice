{
  "time": "2026-01-24T14:36:57.430208-08:00",
  "level": "INFO",
  "msg": "STT command",
  "callstack": [
    "dispatcher.go:673:/server.(*dispatcher).RunAircraftCommands",
    "value.go:581:reflect.Value.call",
    "value.go:365:reflect.Value.Call",
    "server.go:383:net/rpc.(*service).call",
    "asm_arm64.s:1268:runtime.goexit"
  ],
  "transcript": "New Zealand seventy nine, Heavy two miles from Rosley, turn left heading two five zero, maintain three thousand, tel established, cleared ILS runway two two left approach, speed one eight zero until five dmv.",
  "whisper_duration_ms": 692.977,
  "audio_duration_ms": 9856,
  "processor": "GPU: Apple M4 Pro, 14 CPU / 20 GPU cores, 48GB",
  "callsign": "ANZ79",
  "command": "L250 A30 CI2L S180/U5DME",
  "stt_aircraft": {
    "Brickyard 2985": {
      "Callsign": "RPA2985",
      "AircraftType": "E75L",
      "Fixes": {
        "Cimble": "CIMBL",
        "Deer Park": "DPK",
        "Detgy": "DETGY",
        "Hair": "HAIRR",
        "Haupt": "HAUPT",
        "J F K": "KJFK",
        "Kennedy": "KJFK",
        "Lefer": "LEFER",
        "Norton": "NRTON",
        "Rosley": "ROSLY",
        "Sajul": "SAJUL",
        "Seagull": "CEEGL",
        "Tapper": "TAPPR",
        "Zalpo": "ZALPO"
      },
      "CandidateApproaches": {
        "Belmont Visual runway two two Left": "BVA",
        "I L S runway two two left": "I2L",
        "I L S runway two two right": "I2R",
        "r-nav runway two two right": "R2R",
        "r-nav x-ray runway two two left": "R2L"
      },
      "AssignedApproach": "ILS Runway 22L",
      "SID": "",
      "STAR": "CAMRN5",
      "Altitude": 3000,
      "State": "arrival",
      "ControllerFrequency": "2G",
      "TrackingController": "2G",
      "AddressingForm": 0
    },
    "New Zealand 79 heavy": {
      "Callsign": "ANZ79",
      "AircraftType": "B789",
      "Fixes": {
        "Cimble": "CIMBL",
        "Deer Park": "DPK",
        "Detgy": "DETGY",
        "Hair": "HAIRR",
        "Haupt": "HAUPT",
        "J F K": "KJFK",
        "Kennedy": "KJFK",
        "Lefer": "LEFER",
        "Norton": "NRTON",
        "Rosley": "ROSLY",
        "Sajul": "SAJUL",
        "Seagull": "CEEGL",
        "Tapper": "TAPPR",
        "Zalpo": "ZALPO"
      },
      "CandidateApproaches": {
        "Belmont Visual runway two two Left": "BVA",
        "I L S runway two two left": "I2L",
        "I L S runway two two right": "I2R",
        "r-nav runway two two right": "R2R",
        "r-nav x-ray runway two two left": "R2L"
      },
      "AssignedApproach": "ILS Runway 22L",
      "SID": "",
      "STAR": "CAMRN5",
      "Altitude": 3000,
      "State": "arrival",
      "ControllerFrequency": "2G",
      "TrackingController": "2G",
      "AddressingForm": 0
    },
    "november 21799": {
      "Callsign": "N21799",
      "AircraftType": "",
      "Fixes": {
        "Danbury": "KDXR"
      },
      "CandidateApproaches": null,
      "AssignedApproach": "",
      "SID": "",
      "STAR": "",
      "Altitude": 1563,
      "State": "",
      "ControllerFrequency": "2G",
      "TrackingController": "",
      "AddressingForm": 0
    },
    "november 515HP": {
      "Callsign": "N515HP",
      "AircraftType": "",
      "Fixes": {
        "Danbury": "KDXR"
      },
      "CandidateApproaches": null,
      "AssignedApproach": "",
      "SID": "",
      "STAR": "",
      "Altitude": 2128,
      "State": "",
      "ControllerFrequency": "2G",
      "TrackingController": "",
      "AddressingForm": 0
    },
    "november 820BP": {
      "Callsign": "N820BP",
      "AircraftType": "",
      "Fixes": {
        "Suffolk County": "KFOK",
        "Westhampton": "KFOK"
      },
      "CandidateApproaches": null,
      "AssignedApproach": "",
      "SID": "",
      "STAR": "",
      "Altitude": 9500,
      "State": "",
      "ControllerFrequency": "2G",
      "TrackingController": "",
      "AddressingForm": 0
    }
  },
  "logs": [
    "[local-stt] === DecodeTranscript START ===",
    "[local-stt] input transcript: \"New Zealand seventy nine, Heavy two miles from Rosley, turn left heading two five zero, maintain three thousand, tel established, cleared ILS runway two two left approach, speed one eight zero until five dmv.\"",
    "[local-stt] normalized words: [new zealand 70 9 heavy 2 miles from rosley turn left heading 2 5 0 maintain 3 thousand tel established cleared ils runway 2 2 left approach speed 1 8 0 until 5 dmv]",
    "[local-stt] tokens: 27",
    "[local-stt]   token[0]: Text=\"new\" Type=0 Value=-1",
    "[local-stt]   token[1]: Text=\"zealand\" Type=0 Value=-1",
    "[local-stt]   token[2]: Text=\"709\" Type=1 Value=709",
    "[local-stt]   token[3]: Text=\"heavy\" Type=0 Value=-1",
    "[local-stt]   token[4]: Text=\"2\" Type=1 Value=2",
    "[local-stt]   token[5]: Text=\"miles\" Type=0 Value=-1",
    "[local-stt]   token[6]: Text=\"from\" Type=0 Value=-1",
    "[local-stt]   token[7]: Text=\"rosley\" Type=0 Value=-1",
    "[local-stt]   token[8]: Text=\"turn\" Type=0 Value=-1",
    "[local-stt]   token[9]: Text=\"left\" Type=0 Value=-1",
    "[local-stt]   token[10]: Text=\"heading\" Type=0 Value=-1",
    "[local-stt]   token[11]: Text=\"250\" Type=1 Value=250",
    "[local-stt]   token[12]: Text=\"maintain\" Type=0 Value=-1",
    "[local-stt]   token[13]: Text=\"30\" Type=2 Value=30",
    "[local-stt]   token[14]: Text=\"tel\" Type=0 Value=-1",
    "[local-stt]   token[15]: Text=\"established\" Type=0 Value=-1",
    "[local-stt]   token[16]: Text=\"cleared\" Type=0 Value=-1",
    "[local-stt]   token[17]: Text=\"ils\" Type=0 Value=-1",
    "[local-stt]   token[18]: Text=\"runway\" Type=0 Value=-1",
    "[local-stt]   token[19]: Text=\"22\" Type=1 Value=22",
    "[local-stt]   token[20]: Text=\"left\" Type=0 Value=-1",
    "[local-stt]   token[21]: Text=\"approach\" Type=0 Value=-1",
    "[local-stt]   token[22]: Text=\"speed\" Type=0 Value=-1",
    "[local-stt]   token[23]: Text=\"180\" Type=1 Value=180",
    "[local-stt]   token[24]: Text=\"until\" Type=0 Value=-1",
    "[local-stt]   token[25]: Text=\"5\" Type=1 Value=5",
    "[local-stt]   token[26]: Text=\"dmv\" Type=0 Value=-1",
    "[local-stt] MatchCallsign: 27 tokens, 5 aircraft",
    "[local-stt]   candidate \"november 820BP\" (ICAO=\"N820BP\"): score=0.67 consumed=1",
    "[local-stt]   candidate \"november 515HP\" (ICAO=\"N515HP\"): score=0.67 consumed=1",
    "[local-stt]   candidate \"Brickyard 2985\" (ICAO=\"RPA2985\"): score=0.00 consumed=0",
    "[local-stt]   candidate \"november 21799\" (ICAO=\"N21799\"): score=0.67 consumed=1",
    "[local-stt]   candidate \"New Zealand 79 heavy\" (ICAO=\"ANZ79\"): score=0.80 consumed=2",
    "[local-stt]   candidate \"Brickyard 2985\" at pos 2: score=0.78 (adjusted=0.62) consumed=3",
    "[local-stt]   candidate \"november 21799\" at pos 2: score=0.76 (adjusted=0.61) consumed=3",
    "[local-stt]   candidate \"Brickyard 2985\" at pos 3: score=0.78 (adjusted=0.54) consumed=2",
    "[local-stt]   candidate \"november 21799\" at pos 3: score=0.76 (adjusted=0.53) consumed=2",
    "[local-stt]   accepted: \"ANZ79\" (conf=0.80, consumed=2, startPos=0)",
    "[local-stt] callsign match: Callsign=\"ANZ79\" SpokenKey=\"New Zealand 79 heavy\" Conf=0.80 Consumed=2",
    "[local-stt] aircraft context: State=\"arrival\" Altitude=3000 Fixes=14 Approaches=5 AssignedApproach=\"ILS Runway 22L\"",
    "[local-stt]   fix: \"Kennedy\" -\u003e \"KJFK\"",
    "[local-stt]   fix: \"Cimble\" -\u003e \"CIMBL\"",
    "[local-stt]   fix: \"Tapper\" -\u003e \"TAPPR\"",
    "[local-stt]   fix: \"Detgy\" -\u003e \"DETGY\"",
    "[local-stt]   fix: \"Rosley\" -\u003e \"ROSLY\"",
    "[local-stt]   fix: \"Deer Park\" -\u003e \"DPK\"",
    "[local-stt]   fix: \"Norton\" -\u003e \"NRTON\"",
    "[local-stt]   fix: \"Sajul\" -\u003e \"SAJUL\"",
    "[local-stt]   fix: \"J F K\" -\u003e \"KJFK\"",
    "[local-stt]   fix: \"Hair\" -\u003e \"HAIRR\"",
    "[local-stt]   fix: \"Seagull\" -\u003e \"CEEGL\"",
    "[local-stt]   fix: \"Haupt\" -\u003e \"HAUPT\"",
    "[local-stt]   fix: \"Lefer\" -\u003e \"LEFER\"",
    "[local-stt]   fix: \"Zalpo\" -\u003e \"ZALPO\"",
    "[local-stt]   approach: \"r-nav x-ray runway two two left\" -\u003e \"R2L\"",
    "[local-stt]   approach: \"r-nav runway two two right\" -\u003e \"R2R\"",
    "[local-stt]   approach: \"I L S runway two two right\" -\u003e \"I2R\"",
    "[local-stt]   approach: \"Belmont Visual runway two two Left\" -\u003e \"BVA\"",
    "[local-stt]   approach: \"I L S runway two two left\" -\u003e \"I2L\"",
    "[local-stt] command tokens after disregard: 25",
    "[local-stt]   token[0]: Text=\"709\" Type=1 Value=709",
    "[local-stt]   token[1]: Text=\"heavy\" Type=0 Value=-1",
    "[local-stt]   token[2]: Text=\"2\" Type=1 Value=2",
    "[local-stt]   token[3]: Text=\"miles\" Type=0 Value=-1",
    "[local-stt]   token[4]: Text=\"from\" Type=0 Value=-1",
    "[local-stt]   token[5]: Text=\"rosley\" Type=0 Value=-1",
    "[local-stt]   token[6]: Text=\"turn\" Type=0 Value=-1",
    "[local-stt]   token[7]: Text=\"left\" Type=0 Value=-1",
    "[local-stt]   token[8]: Text=\"heading\" Type=0 Value=-1",
    "[local-stt]   token[9]: Text=\"250\" Type=1 Value=250",
    "[local-stt]   token[10]: Text=\"maintain\" Type=0 Value=-1",
    "[local-stt]   token[11]: Text=\"30\" Type=2 Value=30",
    "[local-stt]   token[12]: Text=\"tel\" Type=0 Value=-1",
    "[local-stt]   token[13]: Text=\"established\" Type=0 Value=-1",
    "[local-stt]   token[14]: Text=\"cleared\" Type=0 Value=-1",
    "[local-stt]   token[15]: Text=\"ils\" Type=0 Value=-1",
    "[local-stt]   token[16]: Text=\"runway\" Type=0 Value=-1",
    "[local-stt]   token[17]: Text=\"22\" Type=1 Value=22",
    "[local-stt]   token[18]: Text=\"left\" Type=0 Value=-1",
    "[local-stt]   token[19]: Text=\"approach\" Type=0 Value=-1",
    "[local-stt]   token[20]: Text=\"speed\" Type=0 Value=-1",
    "[local-stt]   token[21]: Text=\"180\" Type=1 Value=180",
    "[local-stt]   token[22]: Text=\"until\" Type=0 Value=-1",
    "[local-stt]   token[23]: Text=\"5\" Type=1 Value=5",
    "[local-stt]   token[24]: Text=\"dmv\" Type=0 Value=-1",
    "[local-stt]   position ID: found command keyword \"turn\" at position 6 - not just position ID",
    "[local-stt] ParseCommands: 25 tokens",
    "[local-stt]   no match at token[0]=\"709\", skipping",
    "[local-stt]   skipping filler word: \"heavy\"",
    "[local-stt]   no match at token[2]=\"2\", skipping",
    "[local-stt]   no match at token[3]=\"miles\", skipping",
    "[local-stt]   no match at token[4]=\"from\", skipping",
    "[local-stt]   no match at token[5]=\"rosley\", skipping",
    "[local-stt]   tryMatchTemplate \"turn_left_heading\": cmd=\"L250\" argStr=\"250\" consumed=4",
    "[local-stt]   tryMatchTemplate \"turn_left_only\": cmd=\"L250\" argStr=\"250\" consumed=4",
    "[local-stt]   matched command: \"L250\" (conf=1.00, consumed=4, isThen=false)",
    "[local-stt]   tryMatchTemplate \"maintain_altitude\": cmd=\"A30\" argStr=\"30\" consumed=2",
    "[local-stt]   matched command: \"A30\" (conf=1.00, consumed=2, isThen=false)",
    "[local-stt]   no match at token[12]=\"tel\", skipping",
    "[local-stt]   no match at token[13]=\"established\", skipping",
    "[local-stt]   extractFix: trying to match tokens[0]=\"ils\" against 14 fixes",
    "[local-stt]   extractFix: no match found for \"ils\"",
    "[local-stt]   cleared_direct_fix: keywords matched but fix extraction failed, returning SAYAGAIN/FIX",
    "[local-stt]   matchApproachByTypeAndNumber: type=\"ils\" runway=\"two two left\" -\u003e \"I2L\" (consumed=4)",
    "[local-stt]   tryMatchTemplate \"cleared_approach\": cmd=\"CI2L\" argStr=\"I2L\" consumed=5",
    "[local-stt]   matched command: \"CI2L\" (conf=0.95, consumed=5, isThen=false)",
    "[local-stt]   no match at token[19]=\"approach\", skipping",
    "[local-stt]   tryMatchTemplate \"speed_only\": cmd=\"S180\" argStr=\"180\" consumed=2",
    "[local-stt]   matched command: \"S180\" (conf=1.00, consumed=2, isThen=false)",
    "[local-stt]   no match at token[22]=\"until\", skipping",
    "[local-stt]   no match at token[23]=\"5\", skipping",
    "[local-stt]   no match at token[24]=\"dmv\", skipping",
    "[local-stt] ParseCommands: result=[L250 A30 CI2L S180] (avgConf=0.99)",
    "[local-stt] parsed commands: [L250 A30 CI2L S180] (conf=0.99)",
    "[local-stt] validated commands: [L250 A30 CI2L S180] (conf=1.00)",
    "[local-stt] === DecodeTranscript END: \"ANZ79 L250 A30 CI2L S180\" (conf=0.79, time=681.25Âµs) ==="
  ]
}