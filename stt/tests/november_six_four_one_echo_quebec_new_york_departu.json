{
  "time": "2026-01-24T14:19:58.541309-08:00",
  "level": "INFO",
  "msg": "STT command",
  "callstack": [
    "dispatcher.go:673:/server.(*dispatcher).RunAircraftCommands",
    "value.go:581:reflect.Value.call",
    "value.go:365:reflect.Value.Call",
    "server.go:383:net/rpc.(*service).call",
    "asm_arm64.s:1268:runtime.goexit"
  ],
  "transcript": "November six four one, Echo, Quebec, New York Departure, Squawk zero three one six, Idet.",
  "whisper_duration_ms": 535.51,
  "audio_duration_ms": 5248,
  "processor": "GPU: Apple M4 Pro, 14 CPU / 20 GPU cores, 48GB",
  "callsign": "N641EQ",
  "command": "SQ0316 ID",
  "stt_aircraft": {
    "KLM 769 heavy": {
      "Callsign": "KLM769",
      "AircraftType": "B78X",
      "Fixes": {
        "Betty": "BETTE"
      },
      "CandidateApproaches": null,
      "AssignedApproach": "",
      "SID": "JFK5",
      "STAR": "",
      "Altitude": 1067,
      "State": "departure",
      "ControllerFrequency": "2J",
      "TrackingController": "2J",
      "AddressingForm": 0
    },
    "november 641EQ": {
      "Callsign": "N641EQ",
      "AircraftType": "",
      "Fixes": {
        "Danbury": "KDXR"
      },
      "CandidateApproaches": null,
      "AssignedApproach": "",
      "SID": "",
      "STAR": "",
      "Altitude": 2102,
      "State": "",
      "ControllerFrequency": "2G",
      "TrackingController": "",
      "AddressingForm": 0
    }
  },
  "logs": [
    "[local-stt] === DecodeTranscript START ===",
    "[local-stt] input transcript: \"November six four one, Echo, Quebec, New York Departure, Squawk zero three one six, Idet.\"",
    "[local-stt] normalized words: [november 6 4 1 echo quebec new york departure squawk 0 3 1 6 idet]",
    "[local-stt] tokens: 10",
    "[local-stt]   token[0]: Text=\"november\" Type=0 Value=-1",
    "[local-stt]   token[1]: Text=\"641\" Type=1 Value=641",
    "[local-stt]   token[2]: Text=\"echo\" Type=0 Value=-1",
    "[local-stt]   token[3]: Text=\"quebec\" Type=0 Value=-1",
    "[local-stt]   token[4]: Text=\"new\" Type=0 Value=-1",
    "[local-stt]   token[5]: Text=\"york\" Type=0 Value=-1",
    "[local-stt]   token[6]: Text=\"departure\" Type=0 Value=-1",
    "[local-stt]   token[7]: Text=\"squawk\" Type=0 Value=-1",
    "[local-stt]   token[8]: Text=\"0316\" Type=1 Value=316",
    "[local-stt]   token[9]: Text=\"idet\" Type=0 Value=-1",
    "[local-stt] MatchCallsign: 10 tokens, 2 aircraft",
    "[local-stt]   candidate \"november 641EQ\" (ICAO=\"N641EQ\"): score=1.10 consumed=4",
    "[local-stt]   candidate \"KLM 769 heavy\" (ICAO=\"KLM769\"): score=0.00 consumed=0",
    "[local-stt]   candidate \"november 641EQ\" at pos 1: score=1.00 (adjusted=0.90) consumed=3",
    "[local-stt]   candidate \"november 641EQ\" at pos 2: score=0.85 (adjusted=0.68) consumed=2",
    "[local-stt]   accepted: \"N641EQ\" (conf=1.10, consumed=4, startPos=0)",
    "[local-stt] callsign match: Callsign=\"N641EQ\" SpokenKey=\"november 641EQ\" Conf=1.10 Consumed=4",
    "[local-stt] aircraft context: State=\"\" Altitude=2102 Fixes=1 Approaches=0 AssignedApproach=\"\"",
    "[local-stt]   fix: \"Danbury\" -\u003e \"KDXR\"",
    "[local-stt] command tokens after disregard: 6",
    "[local-stt]   token[0]: Text=\"new\" Type=0 Value=-1",
    "[local-stt]   token[1]: Text=\"york\" Type=0 Value=-1",
    "[local-stt]   token[2]: Text=\"departure\" Type=0 Value=-1",
    "[local-stt]   token[3]: Text=\"squawk\" Type=0 Value=-1",
    "[local-stt]   token[4]: Text=\"0316\" Type=1 Value=316",
    "[local-stt]   token[5]: Text=\"idet\" Type=0 Value=-1",
    "[local-stt]   position ID: found command keyword \"squawk\" at position 3 - not just position ID",
    "[local-stt] ParseCommands: 6 tokens",
    "[local-stt]   no match at token[0]=\"new\", skipping",
    "[local-stt]   no match at token[1]=\"york\", skipping",
    "[local-stt]   tryMatchTemplate \"depart_fix_heading\": keywords matched, consumed=1, next tokens=[squawk 0316 idet]",
    "[local-stt]   extractFix: trying to match tokens[0]=\"squawk\" against 1 fixes",
    "[local-stt]   extractFix: no match found for \"squawk\"",
    "[local-stt]   tryMatchTemplate \"depart_fix_heading\": fix extraction failed, tokens=[{ squawk 0 -1 9} { 0316 1 316 10} { idet 0 -1 14}] fixes=1",
    "[local-stt]   no match at token[2]=\"departure\", skipping",
    "[local-stt]   tryMatchTemplate \"squawk_code\": cmd=\"SQ0316\" argStr=\"0316\" consumed=2",
    "[local-stt]   matched command: \"SQ0316\" (conf=1.00, consumed=2, isThen=false)",
    "[local-stt]   tryMatchTemplate \"direct_fix\": keywords matched, consumed=1, next tokens=[]",
    "[local-stt]   extractFix: no tokens to match",
    "[local-stt]   tryMatchTemplate \"ident_only\": cmd=\"ID\" argStr=\"\" consumed=1",
    "[local-stt]   matched command: \"ID\" (conf=1.00, consumed=1, isThen=false)",
    "[local-stt] ParseCommands: result=[SQ0316 ID] (avgConf=1.00)",
    "[local-stt] parsed commands: [SQ0316 ID] (conf=1.00)",
    "[local-stt] validated commands: [SQ0316 ID] (conf=1.00)",
    "[local-stt] === DecodeTranscript END: \"N641EQ SQ0316 ID\" (conf=1.10, time=741.5Âµs) ==="
  ]
}